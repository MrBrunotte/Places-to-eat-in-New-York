<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tutorial</title>
    <style>
        #map {
            height: 400px;
            width: 100%;
        }
    </style>
</head>

<body>
    <h1>My Google map</h1>
    <div id="map"></div>

    <script>
        // 1) Startcreate the map
        function initMap() {
            /* Put the options inside a  variable and that is the second parameter in the function*/
            var options = {
                zoom: 8,
                center: { lat: 42.3601, lng: -71.0589 }
            }
            //new map
            var map = new google.maps.Map(document.getElementById('map'), options);
            // 1) END

            /*<!--! below is to add ONE marker 2 - 4.1
        // 2) ADD marker and its position
        var marker = new google.maps.Marker({
            position: { lat: 42.4668, lng: -70.9495 },
            // add the position to the map
            map: map,
            //3) add custom marker. I want to have one for hotel, restaurant and to-do!
            icon: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png'
        });

        // 4) add info window for the marker. The InfoWindow function takes in the object content
        var infoWindow = new google.maps.InfoWindow({
            content: '<h1>Lynn MA</h1>'
        });

        // 4.1) add a listener for the infoWindow
        marker.addListener('click', function () {
            infoWindow.open(map, marker);
        }); */

            // 11) "add array of markers" add the properties for the marker into an array so we dont have to add one after the other!
            // copy everything within the curlybraces in the coords in "addMarker"
            var markers = [
                {
                    coords: { lat: 42.4668, lng: -70.9495 },
                    iconImage: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',
                    //9 add infoWindow
                    content: '<h1>first infoWindow</h1>'
                },
                {
                    coords: { lat: 42.269478, lng: -71.807783 },
                    content: '<h3>My second infoWindow</h3>'
                },
                {
                    coords: { lat: 42.7762, lng: -71.0773 }
                }
            ];

            // 12) Loop through markers (from step 11)
            for (var i = 0; i < markers.length; i++) {
                // paste in the markers array so it loops through the markers from 11. Now we comment out the three add markers in 6!
                addMarker(markers[i]);
            }

            // 6) call the plain "add marker" function (without the coords properties)
            // 6.1) add the coords and 
            /*addMarker({
                coords: { lat: 42.4668, lng: -70.9495 },
                iconImage: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',
                //9 add infoWindow
                content: '<h1>first infoWindow</h1>'
            });

            // 10) add second infowindow
            addMarker({
                coords: { lat: 42.269478, lng: -71.807783 },
                content: '<h3>My second infoWindow</h3>'
            });
            addMarker({ coords: { lat: 42.7762, lng: -71.0773 } }); */

            //<!--!5) create "add maker function" with coords in the function, this is replaced in 6.1 with "props"
            // 6.11) props is this now { coords: { lat: 42.4668, lng: -70.9495 } }
            function addMarker(props) {
                var marker = new google.maps.Marker({
                    //6.2 add "props.coords"
                    position: props.coords,
                    // add the position to the map
                    map: map,
                    //3) add custom marker. paste in url from google mas I want to have one for hotel, restaurant and to-do!
                    // 7) remove url and add:"props.iconImage"
                    //icon: props.iconImage
                });
                // 8) Since we have one "custom" icon and 2 standard it is not optimal since the two standard markers are undifined in props! thats why we do the if function!
                // 8.1 Check for custom icon
                if (props.iconImage) {
                    // 8.1 set icon image
                    marker.setIcon(props.iconImage);
                }

                // 9.1) check content in "props"
                if (props.content) {
                    var infoWindow = new google.maps.InfoWindow({
                        // 9.3 remove the hard code and insert "props"
                        content: props.content
                    });

                    // 4.1 + 9.2(copied from above)) add a listener for the infoWindow
                    marker.addListener('click', function () {
                        infoWindow.open(map, marker);
                    });
                }
            }
        }
    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCOKcp5VZq8sZ-g6liblriDyqOXl_-7fpo&callback=initMap">
        </script>

</body>

</html>
